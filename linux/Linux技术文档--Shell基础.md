### Linux 技术文档 —— Shell 基础

----
> 人之为学有难易乎?学之,则难者亦易矣;不学,则易者亦难矣。

#### 一、常用快捷键

	ctrl + c		# 强制终止当前命令
	ctrl + l		# 清屏 = clear 
	ctrl + a		# 光标移动到命令行首
	ctrl + e		# 光标移动到命令行尾
	ctrl + u		# 从光标所在位置删除到行首
	ctrl + z		# 把命令放入后台，命令并没有被中断，只是在后台执行
	ctrl + r		# 在历史命令中搜索
	
<br><br>
	
#### 二、命令生效顺序

1. 用绝对路径或相对路径执行的命令
2. 别名
3. `Bash`的内部命令
4. 按照`$PATH`环境变量定义的目录查找顺序找到的第一个命令

```
echo $PATH		#查看环境变量的值，是一个用冒号分隔的目录
```
    
<br><br>    
    
#### 三、命令的别名

	#查看系统中已经生效的命令
	alias						
	
	#设定别名（重启后失效）
	alias [别名]='[原命令]'		
	
	
	#写入 ~/.bashrc 环境变量配置文件可以使别名永久生效 (重新登录后该配置文件才能生效)
	vi ~/.bashrc
	
	#让环境变量配置文件直接生效
	source ~/.bashrc
	
	#删除别名
	unalias [别名]		


<br><br>

#### 四、历史命令

* 历史命令保存在 `~/.bash_history` 中，用户每次登陆，并且`正确注销`后才能保存。
* 历史命令默认保存1000条，可以再环境变量配置文件 `/etc/profile` 中进行修改`HISTSIZE`的值即可。


```

	#查看历史命令
	history
	
	#把历史命令缓存写入文件
	history -w
	
	#清空历史命令
	history -c

	#执行第n行的历史命令
	![n]
	
	#重复执行上一条历史命令
	!!
	
	#执行最后（最近)一条以该字符串开头的命令
	![str]

	#上、下箭头可以调用以前的命令
```	

##### 不清空历史命令的原因
* 历史命令是一个重要的`帮助手段`，可以让我们看到之前操作的命令，一旦出现错误，可以通过历史命令来排错。
* 外来入侵者每次都会习惯性的清空历史命令。如果你一登陆，发现历史命令没有了，至少可以说明，在你登陆之前，已经被入侵过了。

<br><br>



#### 五、命令与文件的补全
* 按`tab键`可以补全命令。
* 按一次`tab键`不补全，说明以此开头的命令有多个。
* 那么，按第二次`tab键`可以列出所有命令。
* 目录、文件也类似。
 
##### 补充：
1. 命令的补全依赖于`$PATH`变量。
2. 文件的补全依赖于当前路径。

<br><br>

#### 六、输出重定向

##### 什么是输出？
* 把电脑执行完的结果显示出来，就是输出。


##### 什么是输入？
* 把数据写进电脑里，就是输入。


##### 输入输出设备？
* 键盘   --> 标准输入设备 --> 文件描述符 0 --> /dev/stdin
* 显示器 --> 标准输出设备 --> 文件描述符 1 --> /dev/stdout
* 显示器 --> 标准错误输出 --> 文件描述符 2 --> /dev/stderr

##### 什么是输出重定向？
* 把本该输出到显示屏上的结果写到文件里


```
# 单个大于号表示覆盖文件，两个大于号表示追加文件
#[命令] > [文件名]
#[命令] >> [文件名]
ls > test.log
ls >> test.log  		## 只能保存命令的正确输出
[错误命令]  2>[文件名] 	 ## 2> 可以保存命令的错误输出，大于号两边不能有空格
[错误命令]  2>>[文件名]
```

	#几个常用命令
	#不论命令是正确还是错误的，都把执行结果写到文件中
	命令 >> 文件 2>&1 
	命令 &>> 文件
	
	#命令执行正确或者错误，分别存到两个不同的文件中去
	命令>>[文件1] 2>>[文件2] 

	


#### 七、管道符
##### 多命令顺序执行符号
	
	[命令1] ; [命令2]     #连接多个命令，不管前一条命令正确与否，都顺序执行下去
	[命令1] && [命令2]	#前一个命令正确执行，后一个命令才能执行。当前一条命令执行不正确，后一条不会执行
	[命令1] || [命令2]	#当前一条命令执行不正确，后一条命令才执行。前一条命令执行正确，后一条命令不执行
	

##### 管道符

	#命令1的正确输出作为命令2的操作对象
	[命令1] | [命令2]
	
	#浏览/etc目录，分屏显示
	ls -l /etc | more
	
	#查看系统中所有网络连接的个数
	#"LISTEN" 侦听来自远方的TCP端口的连接请求
	#"ESTABLISHED" 代表一个打开的连接
	# wc -l 统计输入的行数
	netstat -an | grep "ESTABLISHED" | wc -l
	
	

#### 八、通配符

	* - 通配符,代表任意字符(0到多个)
	? - 通配符,代表一个字符
	/ - 转义符号,将特殊字符或通配符还原成一般符号
	[]代表的是中括号中的任意一个
	例如[abcdef] 可以是a b c d e f 中的任意一个字母当然也可以是数字
	[-]代表的是一个范围
	例如 [a-z] 表示的是字母a到z之间的所有字母
	[^]^是反向选择符号从字面意思可以知道也就是非的意思
	例子[^abc]表示只要不a b c 这三个字符中的任意一个就选择
	
	

#### 九、特殊符号

	#  注释说明
	我们在练习的时候可以通过把关键的一些东西注释掉然后看效果
	$ 变量符号
	\ 转义字符 一般用在写很长的通配符上 我们可以把特殊字符或者通配符 转义成一般的字符
	； 连续命令执行分割符号
	这个很好用 如果不想写脚本的话可以用这种方法
	例如 cp /etc /tmp ;ls  /tmp ;cd etc ;rm etc
	{} 中间是命令块
	''  反点号中间的先执行




 
 









	